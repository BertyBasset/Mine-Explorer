<html>
    <head>
        <title>Mine Database</title>
        <link rel="stylesheet" href="main.css" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>       
        <script src="./javascript/os.js"></script>
        <script src="./javascript/MineSearch.js"></script>
        <script>
            // Set initial focus of quick search textbox
            document.addEventListener("DOMContentLoaded", function() {
                ckIsCrow = document.getElementById('is-crow');
                ckIsCrow.indeterminate=false;
                ckIsCrow.title = "No preference";
                document.getElementById("quick-search").focus();
                initMap();
            });
        </script>
        <style>
            @media (max-width: 1024px) {
                #data-table td:nth-child(1),
                #data-table td:nth-child(3),
                #data-table td:nth-child(5),
                #data-table td:nth-child(6),
                #data-table td:nth-child(10) 
                #data-table th:nth-child(1),
                #data-table th:nth-child(3),
                #data-table th:nth-child(5),
                #data-table th:nth-child(6),
                #data-table th:nth-child(10) 
                
                
                {
                display: none;
    }
}

        </style>


    </head>
    <body>
        <div class="banner"></div>
        <menu class="MainMenu">
            <a href="https://buddlepit.co.uk">Forums</a>
            <a class="selected" href="MineSearch.html">Mine Database</a>
            <a href="CoOrds.html">Utilities</a>
            <a href="About.html" style="visibility: collapse;">About</a>
            <!--
            <a href="https://buddlepit.co.uk/community/index.php?login/">Login</a>
            -->
        </menu>
        <menu class="SubMenu">
            <a class="selected" href="MineSearch.html">Mine Search</a>
            <a href="#" onclick="window.open('MineMapExplorer.html', '_blank')">Map Explorer</a>
        </menu>



        <div id="spinner-container">
            <div id="spinner">Loading...</div>
        </div>

        <div class="container">
            <div class="centered-div">
                <!-- Content of the centered div goes here -->
                <div class="centered-div">


                    <div class="search-form" style="text-align: center; margin-bottom: 12px; margin-top: 6px;">
                        Name starts with...&nbsp;&nbsp;&nbsp;  
                        <span class="letterSearch" onclick="letterSearch('A');">A</span> 
                        <span class="letterSearch" onclick="letterSearch('B');">B</span>  
                        <span class="letterSearch" onclick="letterSearch('C');">C</span> 
                        <span class="letterSearch" onclick="letterSearch('D');">D</span> 
                        <span class="letterSearch" onclick="letterSearch('E');">E</span> 
                        <span class="letterSearch" onclick="letterSearch('F');">F</span> 
                        <span class="letterSearch" onclick="letterSearch('G');">G</span> 
                        <span class="letterSearch" onclick="letterSearch('H');">H</span> 
                        <span class="letterSearch" onclick="letterSearch('I');">I</span> 
                        <span class="letterSearch" onclick="letterSearch('J');">J</span> 
                        <span class="letterSearch" onclick="letterSearch('K');">K</span> 
                        <span class="letterSearch" onclick="letterSearch('L');">L</span> 
                        <span class="letterSearch" onclick="letterSearch('M');">M</span> 
                        <span class="letterSearch" onclick="letterSearch('N');">N</span> 
                        <span class="letterSearch" onclick="letterSearch('O');">O</span> 
                        <span class="letterSearch" onclick="letterSearch('P');">P</span> 
                        <span class="letterSearch" onclick="letterSearch('Q');">Q</span> 
                        <span class="letterSearch" onclick="letterSearch('R');">R</span> 
                        <span class="letterSearch" onclick="letterSearch('S');">S</span> 
                        <span class="letterSearch" onclick="letterSearch('T');">T</span> 
                        <span class="letterSearch" onclick="letterSearch('U');">U</span> 
                        <span class="letterSearch" onclick="letterSearch('V');">V</span> 
                        <span class="letterSearch" onclick="letterSearch('W');">W</span> 
                        <span class="letterSearch" onclick="letterSearch('X');">X</span> 
                        <span class="letterSearch" onclick="letterSearch('Y');">Y</span> 
                        <span class="letterSearch" onclick="letterSearch('Z');">Z</span> 
                    </div>
                    <div class="horizontal-line"></div>    
                    <!-- Quick Search Form -->
                    <div class="search-form">
                        <label for="quick-search">Quick Search:</label>
                        <input type="text" id="quick-search" name="quick-search" placeholder="[enter search text" onkeydown="if(event.keyCode===13) quickSearch();" title="Searches Name(s), Location, History, WorkedStart, WorkedEnd, AccessDetails, Description and ConservationNotes" onfocus="this.select()" />
                        <button style="width: 70px;" onclick="quickSearch();">Search</button>
                    </div>
               
                    <div class="horizontal-line" style="position: relative;top:-12px"></div>                    
                    <!-- Detailed Search Form -->
                    <div class="search-form">
                        <div class="input-group">
                            <label for="name">Name:</label>
                            <input type="text" id="name" name="name" placeholder="[enter name]" title="Site Name or any alternative names" onfocus="this.select()" />
                        </div>
                        <div class="input-group">
                            <label for="text">Text Fields:</label>
                            <input type="text" id="text" name="text" placeholder="[enter text]" title="Any text that appears in History, StartDate, EndDate, AccessDetails, Description or Conservation Notes" onfocus="this.select()" />
                        </div>


                        <div class="input-group">
                            <label for="area">Area:</label>
                            <select id="area" name="area" title="Buddlepit Forum mining area">
                                <option value="">[select area]</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="os-sheet">OS Sheet:</label>
                            <select id="os-sheet" name="os-sheet">
                                <option value="">[select OS Sheet]</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="site-type">Site Type:</label>
                            <select id="site-type" name="site-type">
                                <option value="">[select site type]</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="product">Product:</label>
                            <select id="product" name="product">
                                <option value="">[select product]</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="gridref">or Grid Ref:</label>
                            <input type="text" id="gridref" name="distance" onblur="validateGridRef(this);" pattern="^([STNHOstnho][A-Za-z]\s?)(\d{5}\s?\d{5}|\d{4}\s?\d{4}|\d{3}\s?\d{3}|\d{2}\s?\d{2}|\d{1}\s?\d{1})$" placeholder="[SS EEEE NNNN]" title="Enter Grid Ref - then search radius" onfocus="this.select()" />
                        </div>    
                        <div class="input-group">
                            <label for="latlong">Lat Long:</label>
                            <input type="text" id="latlong" name="latlong" onblur="validateLatLong(this);" pattern="^-?([0-9]|[1-8][0-9]|90)(\.\d+)?\s*,\s*-?((0|[1-9]|[1-9][0-9]|1[0-7][0-9]|180)(\.\d+)?)$" placeholder="[Lat, Lon]" title="Enter Lat, Lon - then search radius" onfocus="this.select()"/>
                        </div>                      

                    
                        <div class="input-group" style="position: relative; left:4px;">
                            <label for="distance">Within km:</label>
                            <input type="number" min="0" max="50" id="distance" name="distance" placeholder="[enter distance in km]" onblur="updateMinMax(this)" title="Enter [Lat, Lon] or Grid Ref - then search radius" onfocus="this.select()"  />
                        </div>
                        <div class="input-group">
                            <label for="is-crow">Is Crow:</label>
                            <input type="checkbox" id="is-crow" name="is-crow"  onclick="return toggleCheckbox();">
                        </div>                          
                        <div class="button-group">
                            <button type="submit" style="width: 70px;" onclick="search();">Search</button>
                            <button type="reset" style="width: 70px;" onclick="reset();">Reset</button>
                            &nbsp;&nbsp;&nbsp;&nbsp;Search Results to <select style="width:80px" id="resultSelector" onchange="selectResultDisplay()"><option value="0">Table</option><option value="1">Map</option></select>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="searchresults">
            <div id="search-summary" style="display: none; text-align: center;padding: 7px;">No Matching Records</div>
            <div id="divMap" style="min-width:800px;min-height:800px;margin:auto"></div>
            <table id="data-table" style="display: none; text-align:left" >
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Location</th>
                        <th title="Does not imply right of access">Crow</th>
                        <th title="Corresponds to Buddlepit Forum Areas" style="width:85px">Area Name</th>
                        <th>Products</th>
                        <th>Lat, Lon</th>
                        <th style="width:85px">Grid Ref</th>
                        <th title="Distance from specified Lat,Lon or GridRef">Distance</th>
                        <th style="width:85px">Site Type</th>
                        <th style="width:400px" title="Text from History, Access Details, Description and Conservation Notes">Text Fields</th>

                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically added here -->
                </tbody>
            </table>
            
        </div>
    </body>
</html>     